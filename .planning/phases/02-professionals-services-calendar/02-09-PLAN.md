---
phase: 02-professionals-services-calendar
plan: 09
type: execute
wave: 3
depends_on: ["02-01"]
files_modified:
  - src/components/ui/time-picker.tsx
autonomous: true

must_haves:
  truths:
    - "Time picker accepts HH:mm format"
    - "Can increment/decrement hours and minutes"
    - "Shows current time value"
    - "Works with controlled value/onChange"
  artifacts:
    - path: "src/components/ui/time-picker.tsx"
      provides: "Time picker input component"
      exports: ["TimePicker"]
      min_lines: 50
  key_links:
    - from: "src/components/ui/time-picker.tsx"
      to: "src/components/ui/input.tsx"
      via: "import Input"
      pattern: "import.*Input"
---

<objective>
Create time picker component for schedule editor.

Purpose: Schedule forms need time inputs for start/end times and lunch breaks - simple HH:mm picker.
Output: Reusable TimePicker component with input + spinner controls.
</objective>

<execution_context>
@C:\Users\juana\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\juana\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/phases/02-professionals-services-calendar/02-RESEARCH.md
@src/components/ui/input.tsx
@src/components/ui/button.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create time picker component</name>
  <files>src/components/ui/time-picker.tsx</files>
  <action>
Create src/components/ui/time-picker.tsx - a simple time input with increment/decrement:

```tsx
"use client";

import * as React from "react";
import { ChevronUp, ChevronDown } from "lucide-react";

import { cn } from "@/lib/utils";
import { Input } from "@/components/ui/input";
import { Button } from "@/components/ui/button";

interface TimePickerProps {
  value: string; // "HH:mm" format
  onChange: (value: string) => void;
  className?: string;
  disabled?: boolean;
  minuteStep?: number; // Default 15
}

export function TimePicker({
  value,
  onChange,
  className,
  disabled = false,
  minuteStep = 15,
}: TimePickerProps) {
  const [hours, minutes] = React.useMemo(() => {
    const [h, m] = value.split(":").map(Number);
    return [h || 0, m || 0];
  }, [value]);

  const formatTime = (h: number, m: number) => {
    return `${h.toString().padStart(2, "0")}:${m.toString().padStart(2, "0")}`;
  };

  const incrementHours = () => {
    const newHours = (hours + 1) % 24;
    onChange(formatTime(newHours, minutes));
  };

  const decrementHours = () => {
    const newHours = (hours - 1 + 24) % 24;
    onChange(formatTime(newHours, minutes));
  };

  const incrementMinutes = () => {
    let newMinutes = minutes + minuteStep;
    let newHours = hours;
    if (newMinutes >= 60) {
      newMinutes = 0;
      newHours = (hours + 1) % 24;
    }
    onChange(formatTime(newHours, newMinutes));
  };

  const decrementMinutes = () => {
    let newMinutes = minutes - minuteStep;
    let newHours = hours;
    if (newMinutes < 0) {
      newMinutes = 60 - minuteStep;
      newHours = (hours - 1 + 24) % 24;
    }
    onChange(formatTime(newHours, newMinutes));
  };

  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {
    const newValue = e.target.value;
    // Validate format
    if (/^\d{0,2}:?\d{0,2}$/.test(newValue)) {
      // Clean and format
      const cleaned = newValue.replace(":", "");
      if (cleaned.length <= 4) {
        const h = parseInt(cleaned.slice(0, 2) || "0", 10);
        const m = parseInt(cleaned.slice(2, 4) || "0", 10);
        if (h <= 23 && m <= 59) {
          onChange(formatTime(h, m));
        }
      }
    }
  };

  return (
    <div className={cn("flex items-center gap-1", className)}>
      {/* Hours */}
      <div className="flex flex-col items-center">
        <Button
          type="button"
          variant="ghost"
          size="icon"
          className="h-6 w-8"
          onClick={incrementHours}
          disabled={disabled}
        >
          <ChevronUp className="h-4 w-4" />
        </Button>
        <Input
          type="text"
          value={hours.toString().padStart(2, "0")}
          onChange={(e) => {
            const h = parseInt(e.target.value, 10);
            if (!isNaN(h) && h >= 0 && h <= 23) {
              onChange(formatTime(h, minutes));
            }
          }}
          className="w-12 text-center h-9"
          disabled={disabled}
        />
        <Button
          type="button"
          variant="ghost"
          size="icon"
          className="h-6 w-8"
          onClick={decrementHours}
          disabled={disabled}
        >
          <ChevronDown className="h-4 w-4" />
        </Button>
      </div>

      <span className="text-xl text-muted-foreground">:</span>

      {/* Minutes */}
      <div className="flex flex-col items-center">
        <Button
          type="button"
          variant="ghost"
          size="icon"
          className="h-6 w-8"
          onClick={incrementMinutes}
          disabled={disabled}
        >
          <ChevronUp className="h-4 w-4" />
        </Button>
        <Input
          type="text"
          value={minutes.toString().padStart(2, "0")}
          onChange={(e) => {
            const m = parseInt(e.target.value, 10);
            if (!isNaN(m) && m >= 0 && m <= 59) {
              onChange(formatTime(hours, m));
            }
          }}
          className="w-12 text-center h-9"
          disabled={disabled}
        />
        <Button
          type="button"
          variant="ghost"
          size="icon"
          className="h-6 w-8"
          onClick={decrementMinutes}
          disabled={disabled}
        >
          <ChevronDown className="h-4 w-4" />
        </Button>
      </div>
    </div>
  );
}
```

Key features:
- HH:mm format input/output
- Spinner controls for hours and minutes
- Configurable minute step (default 15 for appointment slots)
- Direct input editing supported
- 24-hour format (no AM/PM)
- Wraps around (23->00, 00->23)
  </action>
  <verify>
No TypeScript errors:
```bash
npx tsc --noEmit
```
  </verify>
  <done>TimePicker component exports and is ready for schedule forms</done>
</task>

</tasks>

<verification>
1. `cat src/components/ui/time-picker.tsx` shows component
2. `npx tsc --noEmit` succeeds
3. Component handles HH:mm format correctly
</verification>

<success_criteria>
- TimePicker accepts value in "HH:mm" format
- Spinner controls increment/decrement hours and minutes
- Direct input editing works with validation
- minuteStep configurable (default 15)
</success_criteria>

<output>
After completion, create `.planning/phases/02-professionals-services-calendar/02-09-SUMMARY.md`
</output>
