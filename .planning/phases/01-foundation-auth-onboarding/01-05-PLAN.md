---
phase: 01-foundation-auth-onboarding
plan: 05
type: execute
wave: 4
depends_on: ["01-03"]
files_modified: [package.json, convex/auth.config.ts, convex/auth.ts, .env.local]
autonomous: true
must_haves:
  truths:
    - "Convex Auth configured with Password provider"
  artifacts:
    - path: "convex/auth.config.ts"
      contains: "Password"
    - path: "convex/auth.ts"
      exports: ["auth"]
---

<objective>
Configure Convex Auth with Password provider for email/password authentication.

Purpose: Enable user authentication.
Output: Convex Auth ready for register/login flows.
</objective>

<tasks>

<task type="auto">
  <name>Configure Convex Auth</name>
  <files>convex/auth.config.ts, convex/auth.ts, .env.local</files>
  <action>
  1. npm install @convex-dev/auth @auth/core

  2. Create convex/auth.config.ts:
  ```typescript
  export default {
    providers: [],
  };
  ```

  3. Create convex/auth.ts:
  ```typescript
  import { convexAuth } from "@convex-dev/auth/server";
  import { Password } from "@convex-dev/auth/providers/Password";

  export const { auth, signIn, signOut, store } = convexAuth({
    providers: [Password],
  });
  ```

  4. Generate auth private key:
     npx @convex-dev/auth

  5. Add to .env.local:
     CONVEX_AUTH_PRIVATE_KEY=<generated-key>

  6. Update convex/schema.ts to include auth tables:
     Add: import { authTables } from "@convex-dev/auth/server";
     Update schema to spread ...authTables

  7. Run npx convex dev to deploy
  </action>
  <verify>npx convex dev shows auth configured</verify>
  <done>Convex Auth configured with Password provider</done>
</task>

</tasks>

<verification>
- [ ] @convex-dev/auth in package.json
- [ ] convex/auth.ts exports auth functions
- [ ] CONVEX_AUTH_PRIVATE_KEY in .env.local
- [ ] Auth tables in schema
</verification>

<success_criteria>
- Convex Auth installed and configured
- Password provider enabled
- Auth tables deployed
</success_criteria>

<output>
Create `.planning/phases/01-foundation-auth-onboarding/01-05-SUMMARY.md`
</output>
