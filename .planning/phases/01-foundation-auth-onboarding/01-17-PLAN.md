---
phase: 01-foundation-auth-onboarding
plan: 17
type: execute
wave: 10
depends_on: ["01-15", "01-16"]
files_modified: [src/components/onboarding/step-1-account.tsx, src/components/onboarding/step-2-clinic.tsx]
autonomous: true
must_haves:
  truths:
    - "Step 1 displays account info"
    - "Step 2 collects clinic data"
  artifacts:
    - path: "src/components/onboarding/step-1-account.tsx"
      min_lines: 40
    - path: "src/components/onboarding/step-2-clinic.tsx"
      min_lines: 60
---

<objective>
Create onboarding steps 1 and 2 components.

Purpose: Account confirmation and clinic data collection.
Output: Steps 1-2 of onboarding wizard.
</objective>

<tasks>

<task type="auto">
  <name>Create steps 1-2</name>
  <files>src/components/onboarding/step-1-account.tsx, src/components/onboarding/step-2-clinic.tsx</files>
  <action>
  1. Create src/components/onboarding/step-1-account.tsx:
  ```typescript
  "use client";

  import { useQuery } from "convex/react";
  import { api } from "../../../convex/_generated/api";
  import { useOnboardingStore } from "@/lib/stores/onboarding-store";
  import { Button } from "@/components/ui/button";
  import { Card, CardContent, CardDescription, CardHeader, CardTitle } from "@/components/ui/card";

  interface Step1Props {
    onNext: () => void;
  }

  export function Step1Account({ onNext }: Step1Props) {
    const user = useQuery(api.users.getCurrentUser);
    const { setStepData } = useOnboardingStore();

    const handleContinue = () => {
      if (user) {
        setStepData("account", { name: user.name, email: user.email });
        onNext();
      }
    };

    return (
      <Card>
        <CardHeader>
          <CardTitle>Confirma tu cuenta</CardTitle>
          <CardDescription>Verifica que tus datos sean correctos</CardDescription>
        </CardHeader>
        <CardContent className="space-y-4">
          <div>
            <p className="text-sm text-gray-500">Nombre</p>
            <p className="font-medium">{user?.name || "Cargando..."}</p>
          </div>
          <div>
            <p className="text-sm text-gray-500">Email</p>
            <p className="font-medium">{user?.email || "Cargando..."}</p>
          </div>
          <Button onClick={handleContinue} className="w-full" disabled={!user}>
            Continuar
          </Button>
        </CardContent>
      </Card>
    );
  }
  ```

  2. Create src/components/onboarding/step-2-clinic.tsx:
  ```typescript
  "use client";

  import { useForm } from "react-hook-form";
  import { zodResolver } from "@hookform/resolvers/zod";
  import { useOnboardingStore } from "@/lib/stores/onboarding-store";
  import { clinicSchema, ClinicInput } from "@/lib/validators/onboarding";
  import { Button } from "@/components/ui/button";
  import { Input } from "@/components/ui/input";
  import { Label } from "@/components/ui/label";
  import { Card, CardContent, CardDescription, CardHeader, CardTitle } from "@/components/ui/card";

  interface Step2Props {
    onNext: () => void;
    onBack: () => void;
  }

  export function Step2Clinic({ onNext, onBack }: Step2Props) {
    const { data, setStepData } = useOnboardingStore();

    const form = useForm<ClinicInput>({
      resolver: zodResolver(clinicSchema),
      defaultValues: data.clinic || { name: "", taxId: "", address: "", phone: "" },
    });

    const onSubmit = (values: ClinicInput) => {
      setStepData("clinic", values);
      onNext();
    };

    return (
      <Card>
        <CardHeader>
          <CardTitle>Datos de la clínica</CardTitle>
          <CardDescription>Información básica de tu clínica</CardDescription>
        </CardHeader>
        <CardContent>
          <form onSubmit={form.handleSubmit(onSubmit)} className="space-y-4">
            <div>
              <Label htmlFor="name">Nombre de la clínica</Label>
              <Input {...form.register("name")} id="name" />
              {form.formState.errors.name && (
                <p className="text-sm text-red-500">{form.formState.errors.name.message}</p>
              )}
            </div>
            <div>
              <Label htmlFor="taxId">RUT</Label>
              <Input {...form.register("taxId")} id="taxId" placeholder="12.345.678-9" />
              {form.formState.errors.taxId && (
                <p className="text-sm text-red-500">{form.formState.errors.taxId.message}</p>
              )}
            </div>
            <div>
              <Label htmlFor="address">Dirección</Label>
              <Input {...form.register("address")} id="address" />
              {form.formState.errors.address && (
                <p className="text-sm text-red-500">{form.formState.errors.address.message}</p>
              )}
            </div>
            <div>
              <Label htmlFor="phone">Teléfono</Label>
              <Input {...form.register("phone")} id="phone" placeholder="+56 9 1234 5678" />
              {form.formState.errors.phone && (
                <p className="text-sm text-red-500">{form.formState.errors.phone.message}</p>
              )}
            </div>
            <div className="flex gap-2">
              <Button type="button" variant="outline" onClick={onBack} className="flex-1">
                Atrás
              </Button>
              <Button type="submit" className="flex-1">
                Continuar
              </Button>
            </div>
          </form>
        </CardContent>
      </Card>
    );
  }
  ```
  </action>
  <verify>Components render without errors</verify>
  <done>Steps 1-2 ready</done>
</task>

</tasks>

<verification>
- [ ] Step 1 shows user data
- [ ] Step 2 form validates
- [ ] Data saves to store
</verification>

<success_criteria>
- Both steps working
- Validation works
- Navigation works
</success_criteria>

<output>
Create `.planning/phases/01-foundation-auth-onboarding/01-17-SUMMARY.md`
</output>
