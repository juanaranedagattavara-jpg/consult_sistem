---
phase: 01-foundation-auth-onboarding
plan: 16
type: execute
wave: 9
depends_on: ["01-14"]
files_modified: [src/lib/validators/onboarding.ts]
autonomous: true
must_haves:
  truths:
    - "Validators exist for all onboarding steps"
  artifacts:
    - path: "src/lib/validators/onboarding.ts"
      exports: ["clinicSchema", "brandingSchema", "scheduleSchema", "setupSchema"]
---

<objective>
Create Zod validation schemas for onboarding steps.

Purpose: Type-safe validation for each wizard step.
Output: Zod schemas for steps 2-5.
</objective>

<tasks>

<task type="auto">
  <name>Create onboarding validators</name>
  <files>src/lib/validators/onboarding.ts</files>
  <action>
  Create src/lib/validators/onboarding.ts:

  ```typescript
  import { z } from "zod";

  // Step 2: Clinic data
  export const clinicSchema = z.object({
    name: z.string().min(2, "Nombre requerido"),
    taxId: z.string().min(8, "RUT inválido"),
    address: z.string().min(5, "Dirección requerida"),
    phone: z.string().min(9, "Teléfono inválido"),
  });

  // Step 3: Branding
  export const brandingSchema = z.object({
    logo: z.string().nullable(),
    primaryColor: z.string().regex(/^#[0-9A-Fa-f]{6}$/, "Color inválido"),
    secondaryColor: z.string().regex(/^#[0-9A-Fa-f]{6}$/, "Color inválido"),
  });

  // Step 4: Schedule
  export const scheduleSchema = z.object({
    workDays: z.array(z.number()).min(1, "Selecciona al menos un día"),
    openTime: z.string().regex(/^\d{2}:\d{2}$/, "Hora inválida"),
    closeTime: z.string().regex(/^\d{2}:\d{2}$/, "Hora inválida"),
    lunchStart: z.string().optional(),
    lunchEnd: z.string().optional(),
  });

  // Step 5: Setup
  export const setupSchema = z.object({
    professionalName: z.string().min(2, "Nombre requerido"),
    serviceName: z.string().min(2, "Nombre del servicio requerido"),
    serviceDuration: z.number().min(15, "Mínimo 15 minutos"),
  });

  export type ClinicInput = z.infer<typeof clinicSchema>;
  export type BrandingInput = z.infer<typeof brandingSchema>;
  export type ScheduleInput = z.infer<typeof scheduleSchema>;
  export type SetupInput = z.infer<typeof setupSchema>;
  ```
  </action>
  <verify>Validators compile without errors</verify>
  <done>Onboarding validators ready</done>
</task>

</tasks>

<verification>
- [ ] All schemas exported
- [ ] Types exported
- [ ] Validation messages in Spanish
</verification>

<success_criteria>
- All step validators created
- Types generated from schemas
</success_criteria>

<output>
Create `.planning/phases/01-foundation-auth-onboarding/01-16-SUMMARY.md`
</output>
