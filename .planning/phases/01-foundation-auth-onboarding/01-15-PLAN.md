---
phase: 01-foundation-auth-onboarding
plan: 15
type: execute
wave: 9
depends_on: ["01-14"]
files_modified: [src/lib/stores/onboarding-store.ts]
autonomous: true
must_haves:
  truths:
    - "Onboarding store persists to localStorage"
  artifacts:
    - path: "src/lib/stores/onboarding-store.ts"
      contains: "persist"
      exports: ["useOnboardingStore"]
---

<objective>
Create Zustand store for onboarding wizard state.

Purpose: Persist onboarding progress across sessions.
Output: Onboarding store with localStorage persistence.
</objective>

<tasks>

<task type="auto">
  <name>Create onboarding store</name>
  <files>src/lib/stores/onboarding-store.ts</files>
  <action>
  Create src/lib/stores/onboarding-store.ts:

  ```typescript
  import { create } from "zustand";
  import { persist } from "zustand/middleware";

  interface AccountData {
    name: string;
    email: string;
  }

  interface ClinicData {
    name: string;
    taxId: string;
    address: string;
    phone: string;
  }

  interface BrandingData {
    logo: string | null;
    primaryColor: string;
    secondaryColor: string;
  }

  interface ScheduleData {
    workDays: number[];
    openTime: string;
    closeTime: string;
    lunchStart?: string;
    lunchEnd?: string;
  }

  interface SetupData {
    professionalName: string;
    serviceName: string;
    serviceDuration: number;
  }

  interface OnboardingData {
    account: AccountData | null;
    clinic: ClinicData | null;
    branding: BrandingData | null;
    schedule: ScheduleData | null;
    setup: SetupData | null;
  }

  interface OnboardingStore {
    currentStep: number;
    data: OnboardingData;
    setStep: (step: number) => void;
    setStepData: <K extends keyof OnboardingData>(step: K, data: OnboardingData[K]) => void;
    reset: () => void;
  }

  const initialData: OnboardingData = {
    account: null,
    clinic: null,
    branding: null,
    schedule: null,
    setup: null,
  };

  export const useOnboardingStore = create<OnboardingStore>()(
    persist(
      (set) => ({
        currentStep: 1,
        data: initialData,
        setStep: (step) => set({ currentStep: step }),
        setStepData: (step, data) =>
          set((state) => ({
            data: { ...state.data, [step]: data },
          })),
        reset: () => set({ currentStep: 1, data: initialData }),
      }),
      { name: "onboarding-storage" }
    )
  );
  ```
  </action>
  <verify>Store imports and exports correctly</verify>
  <done>Onboarding store ready</done>
</task>

</tasks>

<verification>
- [ ] Store exports useOnboardingStore
- [ ] Persist middleware configured
- [ ] All step data types defined
</verification>

<success_criteria>
- Store created with persistence
- Can get/set step data
</success_criteria>

<output>
Create `.planning/phases/01-foundation-auth-onboarding/01-15-SUMMARY.md`
</output>
